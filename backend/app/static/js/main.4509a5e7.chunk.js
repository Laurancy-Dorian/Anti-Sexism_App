(this.webpackJsonpantisexism=this.webpackJsonpantisexism||[]).push([[0],{74:function(e,t,a){e.exports=a(87)},79:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),s=a.n(o),c=(a(79),a(6)),i=a(7),l=a(8),m=a(9),u=a(11),p={api:"http://vps685054.ovh.net:8080/api"},d=a(72);function h(e,t){var a=!1;"#"===e[0]&&(e=e.slice(1),a=!0);var n=parseInt(e,16),r=(n>>16)+t;r>255?r=255:r<0&&(r=0);var o=(n>>8&255)+t;o>255?o=255:o<0&&(o=0);var s=(255&n)+t;s>255?s=255:s<0&&(s=0);var c=[r,s,o].map((function(e){return e<=15?"0".concat(e.toString(16)):e.toString(16)})),i=Object(d.a)(c,3);return r=i[0],s=i[1],(a?"#":"")+r+(o=i[2])+s}var f=a(15),v=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).fetchNumberComments=function(){fetch(p.api+"/remarks/"+n.props.data.id_remark+"/responses").then((function(e){return e.json()})).then((function(e){n.setState({nb_comments:e.length})})).catch((function(e){return console.log("error",e)}))},n.fetchLocal=function(e){window.localStorage.getItem(e)&&(JSON.parse(window.localStorage.getItem(e)).find((function(e){return e===n.props.data.id_remark}))?n.setState(Object(u.a)({},e,!0)):n.setState(Object(u.a)({},e,!1)))},n.componentDidMount=function(){n.fetchNumberComments(),n.fetchLocal("seen"),n.fetchLocal("suffered")},n.handleClick=function(e){var t=e.target.name,a=[];window.localStorage.getItem(t)&&(a=JSON.parse(window.localStorage.getItem(t)));var r={method:"",headers:new Headers,body:new URLSearchParams,redirect:"follow"};-1===a.indexOf(n.props.data.id_remark)?(a.push(n.props.data.id_remark),r.method="PUT"):(a=a.filter((function(e){return e!==n.props.data.id_remark})),r.method="DELETE"),fetch("http://vps685054.ovh.net:8080/api/remarks/"+n.props.data.id_remark+"/"+t,r).then((function(e){if(200!==e.status)throw Error("Modification non effectu\xe9e");window.localStorage.setItem(t,JSON.stringify(a)),n.fetchLocal(t),n.props.handleUpdate(n.props.data.id_remark)})).catch((function(e){return console.log("error",e)}))},n.state={nb_comments:0,seen:!1,suffered:!1},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){e.data.id_remark!==this.props.data.id_remark&&(this.fetchNumberComments(),this.fetchLocal("seen"),this.fetchLocal("suffered"))}},{key:"render",value:function(){var e=new Date(this.props.data.date_remark);e=e.getDate().toLocaleString("fr-FR",{minimumIntegerDigits:2,useGrouping:!1})+"/"+(1+e.getMonth()).toLocaleString("fr-FR",{minimumIntegerDigits:2,useGrouping:!1})+"/"+e.getFullYear()+" \xe0 "+e.getHours().toLocaleString("fr-FR",{minimumIntegerDigits:2,useGrouping:!1})+":"+e.getMinutes().toLocaleString("fr-FR",{minimumIntegerDigits:2,useGrouping:!1});var t,a=this.props.context?this.props.context.color_context:"",n=this.props.context?h(a,200):"",o=this.props.context?h(a,-50):"",s=this.props.context?(t=(t=a).replace("#",""),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=128?"#000":"#FFF"):"";return r.a.createElement("div",{style:{background:n},id:"remark-"+this.props.data.id_remark,className:"remark container"},r.a.createElement("div",{style:{background:a,color:s},className:"header-remark row"},r.a.createElement("div",{className:"remark-user col-4"},r.a.createElement("span",{className:"mr-1"},"Par ",this.props.data.pseudo_user?this.props.data.pseudo_user:"Anonyme"," "),r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("div",{className:"remark-context col-4 text-center"},r.a.createElement("i",{className:"fas fa-quote-left"}),r.a.createElement("span",{className:"mr-2 ml-2"},this.props.context?this.props.context.name_context:""),r.a.createElement("i",{className:"fas fa-quote-right"})),r.a.createElement("div",{className:"remark-date col-4 text-right"},"Le ",e)),r.a.createElement("div",{className:"content-remark"},r.a.createElement(f.b,{to:"/remarks/"+this.props.data.id_remark},r.a.createElement("div",{className:"description-remark"},this.props.data.description_remark)),r.a.createElement("div",{className:"remark-buttons container row justify-content-center"},r.a.createElement("div",{className:"btn btn-group remark-button remark-button-seen row col-12 col-lg-4 ml-md-5 mr-md-5 "},r.a.createElement("button",{onClick:this.handleClick,className:"btn btn-primary col-10 "+(this.state.seen?"clicked":""),name:"seen",style:this.state.seen?{}:{background:o}},"J'ai d\xe9j\xe0 entendu"),r.a.createElement("button",{onClick:this.handleClick,className:"remark-button-number btn btn-light col-2 "+(this.state.seen?"clicked":""),name:"seen"}," ",this.props.data.nb_seen_remark," ")),r.a.createElement("div",{className:"btn btn-group remark-button remark-button remark-button-suffered col-12 col-lg-4 row col ml-md-5 mr-md-5"},r.a.createElement("button",{onClick:this.handleClick,className:"btn btn-primary col-10 "+(this.state.suffered?"clicked":""),name:"suffered",style:this.state.suffered?{}:{background:o}},"J'ai d\xe9j\xe0 subi"),r.a.createElement("button",{onClick:this.handleClick,className:"remark-button-number btn btn-light col-2 "+(this.state.suffered?"clicked":""),name:"suffered"}," ",this.props.data.nb_suffered_remark," ")))),r.a.createElement("div",{className:"footer-remark text-right"},r.a.createElement(f.b,{to:"/remarks/"+this.props.data.id_remark},r.a.createElement("div",null,this.state.nb_comments," ",r.a.createElement("i",{className:"fas fa-comments"})))))}}]),a}(n.Component),b=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.remarks.map((function(t){var a=e.props.contextList.find((function(e){return e.id_context===t.id_context}));return r.a.createElement(v,{key:t.id_remark,data:t,context:a,handleUpdate:e.props.handleUpdate})}));return r.a.createElement("div",{className:"remarks remarks-list container"},t)}}]),a}(n.Component),E=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){if(e.preventDefault(),""!==n.state.context&&""!==n.state.description){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),localStorage.getItem("auth")&&t.append("Authorization","Bearer "+JSON.parse(localStorage.getItem("auth")).token);var a=new URLSearchParams;a.append("description_remark",n.state.description),a.append("id_context",n.state.context),fetch(p.api+"/remarks",{method:"POST",headers:t,body:a,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){n.setState({context:"",description:""}),n.props.afterSubmit("Votre Remarque a bien \xe9t\xe9 ajout\xe9e","success")})).catch((function(e){return console.log("error",e)}))}else n.props.afterSubmit("Veuillez renseigner tous les champs","danger")},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.state={context:"",description:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.contextList.map((function(e){return r.a.createElement("option",{key:e.id_context,style:{color:e.color_context,background:"#FFF"},value:e.id_context}," ",e.name_context," ")}));return r.a.createElement("div",{className:"add-remark container d-flex justify-content-center form-row"},r.a.createElement("div",{className:"d-flex justify-content-start w-100 header"},"Ajouter une remarque"),r.a.createElement("form",{className:"add-remark-form d-flex justify-content-center row col-12",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-row align-items-top col-12 d-flex justify-content-center "},r.a.createElement("div",{className:"col-sm-12 col-md-4 mx-0"},r.a.createElement("select",{className:"form-control",name:"context",value:this.state.context,onChange:this.handleChange},r.a.createElement("option",{value:""},"--- Choisissez un contexte ---"),e)),r.a.createElement("div",{className:"col-sm-12 col-md-6 px-0 mx-0"},r.a.createElement("textarea",{placeholder:"Entrez la remarque",id:"textarearemark",className:"form-control",name:"description",value:this.state.description,onChange:this.handleChange})),r.a.createElement("div",{className:"col-sm-12 col-md-2 d-flex justify-content-center align-items-center"},r.a.createElement("input",{className:"form-control",type:"submit",value:"Envoyer"})))))}}]),a}(n.Component),g=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).fetchAllRemarks=function(){var e=n.props.context?n.props.context:"",t=n.props.content?n.props.content:"";fetch(p.api+"/remarks?context=["+e+"]&content="+t).then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{remarks:e}}))})).catch((function(e){return console.log("error",e)}))},n.updateRemark=function(e){console.log(e),fetch(p.api+"/remarks/"+e).then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{remarks:t.remarks.map((function(t){return e.find((function(e){return e.id_remark===t.id_remark}))||t}))}}))})).catch((function(e){return console.log("error",e)}))},n.fetchAllContexts=function(){fetch(p.api+"/remarks_contexts").then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{remarks:t.remarks,contextList:e}}))})).catch((function(e){return console.log("error",e)}))},n.componentDidMount=function(){n.fetchAllRemarks(),n.fetchAllContexts()},n.componentDidUpdate=function(e){e.context===n.props.context&&e.content===n.props.content||n.fetchAllRemarks()},n.submitNewRemark=function(e,t){n.fetchAllRemarks(),n.props.notificationHandler(e,t)},n.state={remarks:[],contextList:[]},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"home-page container"},r.a.createElement(E,{afterSubmit:this.submitNewRemark,contextList:this.state.contextList}),r.a.createElement(b,{contextList:this.state.contextList,remarks:this.state.remarks,handleUpdate:this.updateRemark}))}}]),a}(n.Component),k=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchLocal("like"),n.fetchLocal("dislike")},n.fetchLocal=function(e){window.localStorage.getItem(e)&&(JSON.parse(window.localStorage.getItem(e)).find((function(e){return e===n.props.data.id_response}))?n.setState(Object(u.a)({},e,!0)):n.setState(Object(u.a)({},e,!1)))},n.handleLikeClick=function(){n.state.dislike&&n.handleClick("dislike"),n.handleClick("like")},n.handleDislikeClick=function(e){n.state.like&&n.handleClick("like"),n.handleClick("dislike")},n.handleClick=function(e){var t=e,a=[];window.localStorage.getItem(t)&&(a=JSON.parse(window.localStorage.getItem(t)));var r={method:"",headers:new Headers,body:new URLSearchParams,redirect:"follow"};-1===a.indexOf(n.props.data.id_response)?(a.push(n.props.data.id_response),r.method="PUT"):(a=a.filter((function(e){return e!==n.props.data.id_response})),r.method="DELETE"),fetch("http://vps685054.ovh.net:8080/api/remarks/"+n.props.data.id_remark+"/responses/"+n.props.data.id_response+"/"+t,r).then((function(e){if(200!==e.status)throw Error("Modification non effectu\xe9e");window.localStorage.setItem(t,JSON.stringify(a)),n.fetchLocal(t),n.props.handleUpdate(n.props.data.id_response)})).catch((function(e){return console.log("error",e)}))},n.state={like:!1,dislike:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=new Date(this.props.data.date_response);e=e.getDate().toLocaleString("fr-FR",{minimumIntegerDigits:2,useGrouping:!1})+"/"+(1+e.getMonth()).toLocaleString("fr-FR",{minimumIntegerDigits:2,useGrouping:!1})+"/"+e.getFullYear()+" \xe0 "+e.getHours().toLocaleString("fr-FR",{minimumIntegerDigits:2,useGrouping:!1})+":"+e.getMinutes().toLocaleString("fr-FR",{minimumIntegerDigits:2,useGrouping:!1});var t="",a="";if(this.props.type){t=this.props.type.name_response_type;try{a=String.fromCodePoint(this.props.type.emoji_response_type)}catch(n){a=this.props.type.emoji_response_type}}return r.a.createElement("div",{id:"response-"+this.props.data.id_response,className:"response container"},r.a.createElement("div",{className:"header-response row"},r.a.createElement("div",{className:"response-user col-4"},"Par ",this.props.data.pseudo_user?this.props.data.pseudo_user:"Anonyme"),r.a.createElement("div",{className:"remark-context col-4 text-center"},r.a.createElement("span",{className:"mr-2 ml-2 response-type-name"}," ",t," "),r.a.createElement("span",{className:"mr-2 ml-2 response-type-emoji"}," ",a," ")),r.a.createElement("div",{className:"response-date col-4 text-right"},"Le ",e," ")),r.a.createElement("div",{className:"content-response"},r.a.createElement("div",{className:"description-response"},this.props.data.description_response),r.a.createElement("div",{className:"remark-buttons container row justify-content-center"},r.a.createElement("div",{className:"btn btn-group remark-button remark-button-seen row col-12 col-lg-5 ml-md-2 mr-md-2"},r.a.createElement("button",{onClick:this.handleLikeClick,className:"btn btn-primary col-10  "+(this.state.like?"clicked":""),name:"like"},"Pertinent"),r.a.createElement("div",{onClick:this.handleLikeClick,className:"remark-button-number btn btn-light col-2 "+(this.state.like?"clicked":""),name:"like"}," ",this.props.data.nb_likes_response," ")),r.a.createElement("div",{className:"btn btn-group remark-button remark-button remark-button-suffered col-12 col-lg-5 row col ml-md-2 mr-md-2"},r.a.createElement("button",{onClick:this.handleDislikeClick,className:"btn btn-primary col-10 "+(this.state.dislike?"clicked":""),name:"dislike"},"Non Pertinent"),r.a.createElement("div",{onClick:this.handleDislikeClick,className:"remark-button-number btn btn-light col-2 "+(this.state.dislike?"clicked":""),name:"dislike"}," ",this.props.data.nb_dislikes_response," ")))))}}]),a}(n.Component),y=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.responses.map((function(t){var a=e.props.responseTypeList.find((function(e){return e.id_response_type===t.id_response_type}));return r.a.createElement(k,{key:"response-"+t.id_response,data:t,type:a,handleUpdate:e.props.handleUpdate})}));return r.a.createElement("div",{className:"responses responses-list container"},t)}}]),a}(n.Component),N=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){if(e.preventDefault(),""!==n.state.responseType&&""!==n.state.description){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),localStorage.getItem("auth")&&t.append("Authorization","Bearer "+JSON.parse(localStorage.getItem("auth")).token);var a=new URLSearchParams;a.append("description_response",n.state.description),a.append("id_response_type",n.state.responseType);var r={method:"POST",headers:t,body:a,redirect:"follow"};fetch(p.api+"/remarks/"+n.props.idRemark+"/responses",r).then((function(e){return e.json()})).then((function(e){n.setState({context:"",description:""}),n.props.afterSubmit("Votre r\xe9ponse a bien \xe9t\xe9 envoy\xe9e","success")})).catch((function(e){console.log(e)}))}else n.props.afterSubmit("Veuillez renseigner tous les champs","danger")},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.state={responseType:"",description:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.responseTypeList.map((function(e){var t="";try{t=String.fromCodePoint(e.emoji_response_type)}catch(a){t=e.emoji_response_type}return r.a.createElement("option",{key:e.id_response_type,value:e.id_response_type}," ",e.name_response_type," ",t," ")}));return r.a.createElement("div",{className:"add-remark add-response container d-flex justify-content-center form-row"},r.a.createElement("div",{className:"d-flex justify-content-start w-100 header"},"Ajouter une r\xe9ponse"),r.a.createElement("form",{className:"add-remark-form d-flex justify-content-center row col-12",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-row align-items-top col-12 d-flex justify-content-center "},r.a.createElement("div",{className:"col-sm-12 col-md-4 mx-0"},r.a.createElement("select",{className:"form-control",name:"responseType",value:this.state.responseType,onChange:this.handleChange},r.a.createElement("option",{value:""},"--- Choisissez un Type de R\xe9ponse ---"),e)),r.a.createElement("div",{className:"col-sm-12 col-md-6 px-0 mx-0"},r.a.createElement("textarea",{id:"textarearesponse",placeholder:"Entrez la r\xe9ponse que vous proposez",className:"form-control",name:"description",value:this.state.description,onChange:this.handleChange})),r.a.createElement("div",{className:"col-sm-12 col-md-2 d-flex justify-content-center align-items-center"},r.a.createElement("input",{className:"form-control",type:"submit",value:"Envoyer"})))))}}]),a}(n.Component),x=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=["primary","secondary","success","danger","warning","info","light","dark"],t=e.includes(this.props.type)?this.props.type:e[0];return r.a.createElement("div",{className:"notification mx-auto m-2 w-75 alert alert-"+t},this.props.content)}}]),a}(n.Component);x.defaultProps={content:"",type:"primary"};var j=x,w=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).fetchRemark=function(){fetch(p.api+"/remarks/"+n.props.idRemark).then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{remark:e,responses:t.responses,contextList:t.contextList,responsesTypeList:t.responsesTypeList,notification:t.notification,notificationType:t.notificationType}}))})).catch((function(e){return console.log("error",e)}))},n.fetchResponses=function(){fetch(p.api+"/remarks/"+n.props.idRemark+"/responses").then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{remark:t.remark,responses:e,contextList:t.contextList,responsesTypeList:t.responsesTypeList,notification:t.notification,notificationType:t.notificationType}}))})).catch((function(e){return console.log("error",e)}))},n.fetchAllContexts=function(){fetch(p.api+"/remarks_contexts").then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{remarks:t.remarks,responses:t.responses,contextList:e,responsesTypeList:t.responsesTypeList,notification:t.notification,notificationType:t.notificationType}}))})).catch((function(e){return console.log("error",e)}))},n.fetchAllResponseTypes=function(){fetch(p.api+"/responses_types").then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{remarks:t.remarks,responses:t.responses,contextList:t.contextList,responsesTypeList:e,notification:t.notification,notificationType:t.notificationType}}))})).catch((function(e){return console.log("error",e)}))},n.componentDidMount=function(){n.fetchRemark(),n.fetchResponses(),n.fetchAllContexts(),n.fetchAllResponseTypes()},n.submitNewResponse=function(e,t){n.setState((function(a){return{remark:a.remark,responses:a.responses,contextList:a.contextList,responsesTypeList:a.responsesTypeList,notification:e,notificationType:t}})),n.fetchResponses()},n.updateResponse=function(e){fetch(p.api+"/remarks/"+n.props.idRemark+"/responses/"+e).then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{responses:t.responses.map((function(t){return e.find((function(e){return e.id_response===t.id_response}))||t}))}}))})).catch((function(e){return console.log("error",e)}))},n.state={remark:[],responses:[],contextList:[],responsesTypeList:[],notification:"",notificationType:"warning"},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"remark-page container"},r.a.createElement(b,{remarks:this.state.remark,contextList:this.state.contextList,handleUpdate:this.fetchRemark}),this.state.notification.length>0?r.a.createElement(j,{type:this.state.notificationType,content:this.state.notification}):"",r.a.createElement(N,{idRemark:parseInt(this.props.idRemark),afterSubmit:this.submitNewResponse,responseTypeList:this.state.responsesTypeList}),r.a.createElement(y,{responses:this.state.responses,responseTypeList:this.state.responsesTypeList,handleUpdate:this.updateResponse}))}}]),a}(n.Component),S=a(94),_=a(96),C=a(97),O=a(95),L=a(70),T=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).fetchAllContexts=function(){fetch(p.api+"/remarks_contexts").then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{contextList:e}}))})).catch((function(e){return console.log("error",e)}))},n.componentDidMount=function(){n.fetchAllContexts()},n.handleSelect=function(e){n.props.handleContext(e)},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.handleClick=function(){n.props.handleSearch(n.state.recherche)},n.handleHomeReturn=function(){n.props.handleHomeReturn&&n.props.handleHomeReturn()},n.state={contextList:[],recherche:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e,t=this.state.contextList.map((function(e){return r.a.createElement(S.a.Item,{key:e.id_context,eventKey:e.id_context,style:{color:e.color_context}},e.name_context)}));if(window.localStorage.getItem("auth")){var a=JSON.parse(window.localStorage.getItem("auth")).user;e=r.a.createElement("div",null,r.a.createElement("span",{className:"mr-2"},"Bienvenue "+a.pseudo_user[0].toUpperCase()+a.pseudo_user.substring(1)),a.is_admin_user?r.a.createElement(f.b,{className:"mr-2 btn btn-dark",to:"/admin"},"Panneau d'administration"):"",r.a.createElement(f.b,{to:"/logout",className:"btn btn-dark"},"D\xe9connexion"))}else e=r.a.createElement(f.b,{className:"btn btn-dark",to:"/login"},"Connexion");return r.a.createElement("div",{className:"header-app"},r.a.createElement(_.a,{className:"d-flex justify-content-between",sticky:"top"},r.a.createElement(C.a,null,r.a.createElement(f.b,{to:"/"},r.a.createElement(_.a.Brand,{onClick:this.handleHomeReturn},r.a.createElement("img",{src:"/logo2.png",width:"30",height:"30",className:"d-inline-block align-top",alt:"React Bootstrap logo"})))),this.props.admin?"":r.a.createElement(C.a,null,r.a.createElement(O.a,{inline:!0},r.a.createElement(L.a,{onChange:this.handleChange,value:this.state.recherche,name:"recherche",type:"text",placeholder:"Search",className:"mr-sm-2"}),r.a.createElement("div",{onClick:this.handleClick,className:"btn btn-dark"},"Rechercher")),r.a.createElement(C.a,{className:"d-flex justify-content-center",onSelect:this.handleSelect},r.a.createElement(S.a,{title:"CATEGORIE"},t))),r.a.createElement("div",{className:"actions-header"},r.a.createElement(C.a,{className:"d-flex justify-content-end"},r.a.createElement("div",{className:"d-flex flex-row-reverse"},e)))))}}]),a}(n.Component),R=a(30),I=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){if(e.preventDefault(),""!==n.state.username&&""!==n.state.password){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded");var a=new URLSearchParams;a.append("pseudo_user",n.state.username),a.append("password_user",n.state.password),fetch(p.api+"/auth",{method:"POST",headers:t,body:a,redirect:"follow"}).then((function(e){if(400===e.status)throw Error("Nom d'utilisateur et/ou Mot de passe invalides");return e.json()})).then((function(e){window.localStorage.setItem("auth",JSON.stringify(e)),n.props.notificationHandler("Bienvenue "+e.user.pseudo_user,"success")})).catch((function(e){n.props.notificationHandler(e.message,"danger")}))}else n.props.notificationHandler("Veuillez compl\xe9ter tous les champs","warning")},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.state={username:"",password:""},n}return Object(i.a)(a,[{key:"render",value:function(){return localStorage.getItem("auth")?r.a.createElement(R.a,{to:{pathname:"/"}}):r.a.createElement("div",{className:"container login"},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,"Connexion")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-user"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nom d'utilisateur",name:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Mot de passe",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Envoyer",className:"btn float-right login_btn"})))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"d-flex justify-content-center links"},"Vous n'avez pas de compte ? ",r.a.createElement(f.b,{to:"/register"},"Inscrivez-vous"))))))}}]),a}(n.Component),D=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();try{for(var t=0,a=Object.keys(n.state);t<a.length;t++){var r=a[t];if(0===n.state[r].length)throw Error("Veuillez compl\xe9ter tous les champs")}if(n.state.password!==n.state.repeatpassword)throw Error("Les deux mots de passes ne correspondent pas");var o=new Headers;o.append("Content-Type","application/x-www-form-urlencoded");var s=new URLSearchParams;s.append("pseudo_user",n.state.username),s.append("password_user",n.state.password);var c={method:"POST",headers:o,body:s,redirect:"follow"},i=null;fetch(p.api+"/users",c).then((function(e){return i=e.status,e.json()})).then((function(e){if(409===i)throw Error("Ce nom d'utilisateur est d\xe9j\xe0 utilis\xe9");if(400===i)throw Error(e.errors[0].message.split(" - ")[1]);if(201!==i)throw Error("Une erreur s'est produite, veuillez r\xe9essayer");fetch(p.api+"/auth",c).then((function(e){return e.json()})).then((function(e){window.localStorage.setItem("auth",JSON.stringify(e)),n.props.notificationHandler("Bienvenue "+e.user.pseudo_user,"success")}))})).catch((function(e){n.props.notificationHandler(e.message,"danger")}))}catch(l){n.props.notificationHandler(l.message,"warning")}},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.state={username:"",password:"",repeatpassword:""},n}return Object(i.a)(a,[{key:"render",value:function(){return localStorage.getItem("auth")?r.a.createElement(R.a,{to:{pathname:"/"}}):r.a.createElement("div",{className:"container login"},r.a.createElement("div",{className:"d-flex justify-content-center h-100"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,"Inscription")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-user"}))),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nom d'utilisateur",name:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Mot de passe",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group form-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-key"}))),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"R\xe9p\xe9ter le Mot de passe",name:"repeatpassword",value:this.state.repeatpassword,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Envoyer",className:"btn float-right login_btn"})))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"d-flex justify-content-center links"},"Vous avez d\xe9j\xe0 un compte ? ",r.a.createElement(f.b,{to:"/login"},"Connectez-vous"))))))}}]),a}(n.Component);var A=function(e){var t=[{name:"G\xe9rer les Cat\xe9gories de Remarques",link:"/remarkcontext"},{name:"G\xe9rer les Types de R\xe9ponses",link:"/responsestypes"},{name:"G\xe9rer les remarques",link:"/remarks"}].map((function(e){return r.a.createElement(f.b,{to:"/admin"+e.link,key:e.link,className:"card col-12 col-md-5 col-lg-5 m-2"},r.a.createElement("div",{className:"card-body d-flex justify-content-center align-items-center text-center"},r.a.createElement("h5",{className:"card-title"},e.name)))}));return r.a.createElement("div",{className:"admin container"},r.a.createElement("div",{className:"row  d-flex justify-content-center"},t))},H=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.componentDidMount=function(){n.setState({name:n.props.data.name_context,color:n.props.data.color_context})},n.handleSubmit=function(e){e.preventDefault();var t=new Headers,a=JSON.parse(localStorage.getItem("auth"));t.append("Authorization","Bearer "+a.token),t.append("Content-Type","application/x-www-form-urlencoded");var r=new URLSearchParams;r.append("name_context",n.state.name),r.append("color_context",n.state.color);var o={method:"PATCH",headers:t,body:r,redirect:"follow"};fetch(p.api+"/remarks_contexts/"+n.props.data.id_context,o).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))},n.state={name:"",color:""},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row tableline"},r.a.createElement("div",{className:"col-2 tablecell"},this.props.data.id_context),r.a.createElement("div",{className:"col-4 tablecell"},r.a.createElement("input",{onChange:this.handleChange,value:this.state.name,name:"name"})),r.a.createElement("div",{className:"col-3 tablecell",style:{background:this.state.color}},r.a.createElement("input",{onChange:this.handleChange,value:this.state.color,name:"color"})),r.a.createElement("div",{className:"col-3 tablecell"},r.a.createElement("button",{className:"btn btn-light m-1"},"Modifier"))))}}]),a}(n.Component),P=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchAllContexts()},n.fetchAllContexts=function(){fetch(p.api+"/remarks_contexts").then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{contextList:e,name:"",color:""}}))})).catch((function(e){return console.log("error",e)}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=new Headers,a=JSON.parse(localStorage.getItem("auth"));t.append("Authorization","Bearer "+a.token),t.append("Content-Type","application/x-www-form-urlencoded");var r=new URLSearchParams;r.append("name_context",n.state.name),r.append("color_context",n.state.color),fetch(p.api+"/remarks_contexts/",{method:"POST",headers:t,body:r,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log(e),n.fetchAllContexts()})).catch((function(e){return console.log("error",e)}))},n.state={contextList:[]},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.contextList.map((function(e){return r.a.createElement(H,{key:e.id_context,data:e})}));return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row table-dark"},r.a.createElement("div",{className:"col-12 "},r.a.createElement("div",{className:"row tableline tableline-header"},r.a.createElement("div",{className:"col-2 tablecell"},"Id Cat\xe9gorie"),r.a.createElement("div",{className:"col-4 tablecell"},"Nom"),r.a.createElement("div",{className:"col-3 tablecell"},"Couleur"),r.a.createElement("div",{className:"col-3 tablecell"},"Action")),e)),r.a.createElement("div",{className:"add-remark container d-flex justify-content-center form-row"},r.a.createElement("div",{className:"d-flex justify-content-start w-100 header"},"Ajouter une Cat\xe9gorie"),r.a.createElement("form",{className:"add-remark-form d-flex justify-content-center row col-12",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-row align-items-top col-12 d-flex justify-content-center "},r.a.createElement("label",{className:"col-sm-12 col-md-4 mx-0"},"Nom de la cat\xe9gorie : ",r.a.createElement("br",null),r.a.createElement("input",{onChange:this.handleChange,value:this.state.name,name:"name"})),r.a.createElement("label",{className:"col-sm-12 col-md-6 px-0 mx-0",style:{background:this.state.color}},"Couleur de la cat\xe9gorie : ",r.a.createElement("br",null),r.a.createElement("input",{onChange:this.handleChange,value:this.state.color,name:"color"})),r.a.createElement("div",{className:"col-sm-12 col-md-2 d-flex justify-content-center align-items-center"},r.a.createElement("input",{className:"form-control",type:"submit",value:"Envoyer"})))))))}}]),a}(n.Component),U=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.setState({name:n.props.data.name_context,color:n.props.data.color_context})},n.handleSubmit=function(e){e.preventDefault();var t=new Headers,a=JSON.parse(localStorage.getItem("auth"));t.append("Authorization","Bearer "+a.token),t.append("Content-Type","application/x-www-form-urlencoded")},n.handleSubmit=function(e){e.preventDefault();var t=new Headers,a=JSON.parse(localStorage.getItem("auth"));t.append("Authorization","Bearer "+a.token),t.append("Content-Type","application/x-www-form-urlencoded");var r={method:"DELETE",headers:t,redirect:"follow"};fetch(p.api+"/remarks/"+n.props.data.id_remark,r).then((function(e){if(200!==e.status)throw Error("Une erreur s'est produite");console.log(n.props.data.id_remark+" Supprim\xe9e"),n.props.onDelete()})).catch((function(e){return console.log("error",e)}))},n.state={name:"",color:""},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"col-12 col-12 tableline"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1 tablecell"},r.a.createElement(f.b,{to:"/remarks/"+this.props.data.id_remark},this.props.data.id_remark)),r.a.createElement("div",{className:"col-7 tablecell"},this.props.data.description_remark),r.a.createElement("div",{className:"col-2 tablecell"},this.props.data.pseudo_user),r.a.createElement("div",{className:"col-2 tablecell"},r.a.createElement("button",{className:"btn btn-danger m-1"},"Supprimer")))))}}]),a}(n.Component),M=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchAllRemarks()},n.fetchAllRemarks=function(){fetch(p.api+"/remarks").then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{remarks:e}}))})).catch((function(e){return console.log("error",e)}))},n.state={remarks:[]},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.remarks.map((function(t){return r.a.createElement(U,{key:t.id_remark,data:t,onDelete:e.fetchAllRemarks})}));return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row table-dark"},r.a.createElement("div",{className:"col-12 tableline tableline-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-1 tablecell"},"Id"),r.a.createElement("div",{className:"col-7 tablecell"},"Description"),r.a.createElement("div",{className:"col-2 tablecell"},"Auteur"),r.a.createElement("div",{className:"col-2 tablecell"}))),t)))}}]),a}(n.Component),z=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.componentDidMount=function(){n.setState({name:n.props.data.name_response_type,emoji:n.props.data.emoji_response_type})},n.handleSubmit=function(e){e.preventDefault();var t=new Headers,a=JSON.parse(localStorage.getItem("auth"));t.append("Authorization","Bearer "+a.token),t.append("Content-Type","application/x-www-form-urlencoded");var r=new URLSearchParams;r.append("name_response_type",n.state.name),r.append("emoji_response_type",n.state.emoji);var o={method:"PATCH",headers:t,body:r,redirect:"follow"};fetch(p.api+"/responses_types/"+n.props.data.id_response_type,o).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))},n.state={name:"",emoji:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.emoji;try{e=String.fromCodePoint(e)}catch(t){}return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row tableline"},r.a.createElement("div",{className:"col-2 tablecell"},this.props.data.id_response_type),r.a.createElement("div",{className:"col-4 tablecell"},r.a.createElement("input",{onChange:this.handleChange,value:this.state.name,name:"name"})),r.a.createElement("div",{className:"col-3 tablecell"},r.a.createElement("input",{onChange:this.handleChange,value:this.state.emoji,name:"emoji"}),e),r.a.createElement("div",{className:"col-3 tablecell"},r.a.createElement("button",{className:"btn btn-light m-1"},"Modifier"))))}}]),a}(n.Component),J=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchAllResponseTypes()},n.fetchAllResponseTypes=function(){fetch(p.api+"/responses_types").then((function(e){return e.json()})).then((function(e){n.setState((function(t){return{responseTypesList:e}}))})).catch((function(e){return console.log("error",e)}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(u.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=new Headers,a=JSON.parse(localStorage.getItem("auth"));t.append("Authorization","Bearer "+a.token),t.append("Content-Type","application/x-www-form-urlencoded");var r=new URLSearchParams;r.append("name_response_type",n.state.name),r.append("emoji_response_type",n.state.emoji),fetch(p.api+"/responses_types/",{method:"POST",headers:t,body:r,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){console.log(e),n.fetchAllContexts()})).catch((function(e){return console.log("error",e)}))},n.state={responseTypesList:[],name:"",emoji:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.responseTypesList.map((function(e){return r.a.createElement(z,{key:e.id_response_type,data:e})}));return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row table-dark"},r.a.createElement("div",{className:"col-12 "},r.a.createElement("div",{className:"row tableline tableline-header"},r.a.createElement("div",{className:"col-2 tablecell"},"Id Type"),r.a.createElement("div",{className:"col-4 tablecell"},"Nom"),r.a.createElement("div",{className:"col-3 tablecell"},"Emoji"),r.a.createElement("div",{className:"col-3 tablecell"},"Action")),e)),r.a.createElement("div",{className:"add-remark container d-flex justify-content-center form-row"},r.a.createElement("div",{className:"d-flex justify-content-start w-100 header"},"Ajouter un Type de R\xe9ponse"),r.a.createElement("form",{className:"add-remark-form d-flex justify-content-center row col-12",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-row align-items-top col-12 d-flex justify-content-center "},r.a.createElement("label",{className:"col-sm-12 col-md-4 mx-0"},"Nom du type : ",r.a.createElement("br",null),r.a.createElement("input",{onChange:this.handleChange,value:this.state.name,name:"name"})),r.a.createElement("label",{className:"col-sm-12 col-md-6 px-0 mx-0"},"Emoji associ\xe9 : ",r.a.createElement("br",null),r.a.createElement("input",{onChange:this.handleChange,value:this.state.emoji,name:"emoji"}),this.state.emoji?String.fromCodePoint(this.state.emoji):""),r.a.createElement("div",{className:"col-sm-12 col-md-2 d-flex justify-content-center align-items-center"},r.a.createElement("input",{className:"form-control",type:"submit",value:"Envoyer"})))))))}}]),a}(n.Component);function F(){var e=Object(R.g)().id;return r.a.createElement(w,{idRemark:e})}function B(e){return localStorage.removeItem("auth"),e.notificationHandler("Vous vous \xeates bien d\xe9connect\xe9","success"),r.a.createElement(R.a,{to:{pathname:"/"}})}function G(){return localStorage.getItem("auth")&&JSON.parse(localStorage.getItem("auth")).user.is_admin_user?r.a.createElement("div",{className:"admin"},r.a.createElement(R.b,{path:"/admin/remarkcontext"},r.a.createElement(P,null)),r.a.createElement(R.b,{path:"/admin/responsestypes"},r.a.createElement(J,null)),r.a.createElement(R.b,{path:"/admin/remarks"},r.a.createElement(M,null)),r.a.createElement(R.b,{exact:!0,path:"/admin"},r.a.createElement(A,null))):r.a.createElement(R.a,{to:{pathname:"/"}})}var V=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).updateNotification=function(t,a){e.setState({notification:t,notificationType:a})},e.filterContext=function(t){e.setState((function(){return{context:t}}))},e.handleHomeReturn=function(){e.setState((function(){return{recherche:"",context:""}}))},e.handleSearch=function(t){e.setState((function(){return{recherche:t}}))},e.state={context:"",notification:"",notificationType:"",recherche:""},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,null,r.a.createElement(R.d,null,r.a.createElement(R.b,{path:"/admin"},r.a.createElement(T,{admin:!0}),r.a.createElement("div",{className:"container"},r.a.createElement(G,null))),r.a.createElement(R.b,{path:"/"},r.a.createElement(T,{handleContext:this.filterContext,handleSearch:this.handleSearch,handleHomeReturn:this.handleHomeReturn}),r.a.createElement("div",{className:"container"},this.state.notification.length>0?r.a.createElement(j,{type:this.state.notificationType,content:this.state.notification}):"",r.a.createElement(R.b,{path:"/remarks/:id"},r.a.createElement(F,null)),r.a.createElement(R.b,{path:"/login"},r.a.createElement(I,{notificationHandler:this.updateNotification})),r.a.createElement(R.b,{path:"/register"},r.a.createElement(D,{notificationHandler:this.updateNotification})),r.a.createElement(R.b,{path:"/logout"},r.a.createElement(B,{notificationHandler:this.updateNotification})),r.a.createElement(R.b,{exact:!0,path:"/"},r.a.createElement(g,{notificationHandler:this.updateNotification,context:this.state.context,content:this.state.recherche})))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[74,1,2]]]);
//# sourceMappingURL=main.4509a5e7.chunk.js.map